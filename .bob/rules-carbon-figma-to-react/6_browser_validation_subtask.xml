<?xml version="1.0" encoding="UTF-8"?>
<browser_validation_guidelines>
    <overview>
    Essential guidance for validating Carbon Design System components in the browser,
    ensuring they meet visual, functional, and accessibility requirements through dedicated subtasks.
    </overview>

    <managing_image_limits>
        <when_to_split>When testing requires more than 8-10 screenshots, create nested subtasks</when_to_split>
        <strategies>
            <strategy>By breakpoint: mobile (320-414px), tablet (768-1024px), desktop (1280px+)</strategy>
            <strategy>By variation: default, compact, with-icon, etc.</strategy>
            <strategy>By state: static (default, disabled), interactive (hover, focus), error states</strategy>
            <strategy>By feature: visual rendering, functionality, accessibility</strategy>
        </strategies>
        <example><![CDATA[
<new_task>
<mode>carbon-figma-to-react</mode>
<message>Validate [component] at mobile breakpoints (320px, 375px, 414px). Test layout and functionality.</message>
</new_task>

<new_task>
<mode>carbon-figma-to-react</mode>
<message>Validate [component] at desktop breakpoints (1280px, 1920px). Test full layout and features.</message>
</new_task>
        ]]>        </example>
    </managing_image_limits>

    <validation_workflow>
        <title>Browser Validation Workflow</title>
        <description>
      Browser validation is a MANDATORY step in the Carbon component implementation process.
      It ensures that components render correctly, function as expected, and meet accessibility standards.
      Users can choose between manual validation (budget-friendly) or automated validation (uses Bob budget).
      For extensive testing, split into nested subtasks as described above.
        </description>

        <steps>
            <step number="1" priority="critical">
                <action>Present validation options to the user</action>
                <guidance>
                    <point>ALWAYS offer the user a choice between manual and automated validation</point>
                    <point>Clearly explain the budget implications of each option</point>
                    <point>Manual validation is recommended to conserve IBM Bob budget</point>
                </guidance>
                <example><![CDATA[
<ask_followup_question>
<question>Browser validation is required to ensure the implementation meets all requirements. How would you like to proceed?</question>
<follow_up>
<suggest>I will validate the implementation in the browser myself (recommended - conserves IBM Bob budget)</suggest>
<suggest>Automate validation in the browser (use sparingly - consumes IBM Bob budget)</suggest>
</follow_up>
</ask_followup_question>
        ]]>                </example>
            </step>

            <step number="2">
                <action>Check if development server is running and start if needed</action>
                <guidance>
                    <point>Check environment_details for "Actively Running Terminals"</point>
                    <point>If development server is not running, start it</point>
                    <point>Track whether you started the server (for cleanup later)</point>
                </guidance>
                <example><![CDATA[
<execute_command>
<command>npm run dev</command>
</execute_command>
        ]]>                </example>
            </step>

            <step number="3a" condition="user_validation">
                <action>Provide validation guidance to user</action>
                <guidance>
                    <point>Explain what needs to be validated based on the Figma design</point>
                    <point>Provide specific URLs and testing instructions</point>
                    <point>List the validation criteria they should check</point>
                    <point>Ask user to provide feedback after validation</point>
                </guidance>
                <example><![CDATA[
Please validate the [component name] implementation against the Figma design in your browser:

**URL to test:** http://localhost:3000/path-to-component

**What to validate:**

1. **Visual Accuracy**
   - Component matches the Figma design
   - Spacing follows Carbon guidelines
   - Typography uses appropriate Carbon type tokens
   - Colors use Carbon theme tokens

2. **Responsive Behavior**
   - Test at mobile viewport (375px width)
   - Test at tablet viewport (768px width)
   - Test at desktop viewport (1280px width)
   - Verify no content overflow or truncation
   - Layout changes follow Carbon grid guidelines

3. **Functionality**
   - Test all interactive elements (buttons, inputs, etc.)
   - Verify state changes are visually indicated
   - Test form validation if applicable

4. **Accessibility**
   - Test keyboard navigation (Tab through all interactive elements)
   - Verify focus states are clearly visible
   - Check that all interactive elements are reachable via keyboard

Please provide feedback on any issues found or confirm the implementation is correct.
        ]]>                </example>
            </step>

            <step number="3b" condition="automated_validation">
                <action>Launch browser and perform automated validation</action>
                <guidance>
                    <point>Use browser_action to launch the browser</point>
                    <point>Navigate to the appropriate URL</point>
                    <point>Take a screenshot for documentation</point>
                </guidance>
                <example><![CDATA[
<browser_action>
<action>launch</action>
<url>http://localhost:3000/path-to-component</url>
</browser_action>

<browser_action>
<action>screenshot</action>
<description>Initial component state</description>
</browser_action>
        ]]>                </example>
            </step>

            <step number="4">
                <action>Test responsive behavior</action>
                <guidance>
                    <point>Resize the browser to test different breakpoints</point>
                    <point>Verify layout changes appropriately</point>
                    <point>Take screenshots at different viewport sizes</point>
                </guidance>
                <example><![CDATA[
<browser_action>
<action>resize</action>
<width>375</width>
<height>667</height>
</browser_action>

<browser_action>
<action>screenshot</action>
<description>Mobile viewport (375x667)</description>
</browser_action>

<browser_action>
<action>resize</action>
<width>1280</width>
<height>800</height>
</browser_action>

<browser_action>
<action>screenshot</action>
<description>Desktop viewport (1280x800)</description>
</browser_action>
        ]]>                </example>
            </step>

            <step number="5">
                <action>Test interactive functionality</action>
                <guidance>
                    <point>Test all interactive elements (buttons, inputs, etc.)</point>
                    <point>Verify state changes and transitions</point>
                    <point>Document the behavior with screenshots</point>
                </guidance>
                <example><![CDATA[
<browser_action>
<action>click</action>
<selector>#submit-button</selector>
</browser_action>

<browser_action>
<action>screenshot</action>
<description>After button click</description>
</browser_action>
        ]]>                </example>
            </step>

            <step number="6">
                <action>Perform accessibility checks</action>
                <guidance>
                    <point>Test keyboard navigation</point>
                    <point>Check focus indicators</point>
                    <point>Verify ARIA attributes</point>
                </guidance>
                <example><![CDATA[
<browser_action>
<action>keyboard</action>
<keys>Tab</keys>
</browser_action>

<browser_action>
<action>screenshot</action>
<description>Focus state on first interactive element</description>
</browser_action>
        ]]>                </example>
            </step>

            <step number="4">
                <action>Document validation results</action>
                <guidance>
                    <point>For automated validation: Summarize findings from browser testing</point>
                    <point>For user validation: Summarize user feedback</point>
                    <point>List any issues discovered</point>
                    <point>Provide recommendations for fixes if needed</point>
                </guidance>
            </step>

            <step number="5" priority="critical">
                <action>Stop development server if started in this task</action>
                <guidance>
                    <point>If you started the development server in step 2, stop it now</point>
                    <point>If the server was already running, leave it running</point>
                    <point>Use Ctrl+C to stop the server</point>
                </guidance>
                <example><![CDATA[
<execute_command>
<command>echo "Stopping development server..."</command>
</execute_command>
<!-- Then manually stop the server in the terminal where it's running -->
        ]]>                </example>
            </step>

            <step number="6" condition="automated_validation">
                <action>Close the browser (automated validation only)</action>
                <guidance>
                    <point>Clean up by closing the browser</point>
                    <point>Only applicable for automated validation</point>
                </guidance>
                <example><![CDATA[
<browser_action>
<action>close</action>
</browser_action>
        ]]>                </example>
            </step>
        </steps>
    </validation_workflow>

    <validation_criteria>
        <title>Component Validation Criteria</title>
        <categories>
            <category name="Visual Accuracy">
                <criteria>
                    <criterion priority="high">Component matches the Figma design</criterion>
                    <criterion>Spacing follows Carbon guidelines</criterion>
                    <criterion>Typography uses appropriate Carbon type tokens</criterion>
                    <criterion>Colors use Carbon theme tokens</criterion>
                </criteria>
            </category>

            <category name="Responsive Behavior">
                <criteria>
                    <criterion priority="high">Component adapts appropriately to all breakpoints</criterion>
                    <criterion>No content overflow or truncation</criterion>
                    <criterion>Layout changes follow Carbon grid guidelines</criterion>
                </criteria>
            </category>

            <category name="Functionality">
                <criteria>
                    <criterion priority="high">All interactive elements function as expected</criterion>
                    <criterion>State changes are visually indicated</criterion>
                    <criterion>Form validation works correctly</criterion>
                </criteria>
            </category>

            <category name="Accessibility">
                <criteria>
                    <criterion priority="high">Component is keyboard navigable</criterion>
                    <criterion>Focus states are clearly visible</criterion>
                    <criterion>ARIA attributes are correctly implemented</criterion>
                    <criterion>Color contrast meets WCAG standards</criterion>
                </criteria>
            </category>
        </categories>
    </validation_criteria>

    <common_validation_scenarios>
        <scenario name="Form Component Validation">
            <description>
        Validating a form component with input fields, validation, and submission.
            </description>
            <key_steps>
                <step>Verify initial form state</step>
                <step>Test form with valid inputs</step>
                <step>Test form with invalid inputs</step>
                <step>Test keyboard navigation</step>
                <step>Test responsive behavior</step>
            </key_steps>
        </scenario>

        <scenario name="Data Table Validation">
            <description>
        Validating a data table component with sorting, pagination, and row selection.
            </description>
            <key_steps>
                <step>Verify initial table rendering</step>
                <step>Test column sorting</step>
                <step>Test pagination</step>
                <step>Test row selection</step>
                <step>Test responsive behavior</step>
            </key_steps>
        </scenario>

        <scenario name="Modal Dialog Validation">
            <description>
        Validating a modal dialog component with opening, closing, and interaction.
            </description>
            <key_steps>
                <step>Open the modal</step>
                <step>Test modal interaction</step>
                <step>Test keyboard accessibility (Tab navigation and Escape to close)</step>
                <step>Test close button functionality</step>
            </key_steps>
        </scenario>
    </common_validation_scenarios>

    <validation_report_template>
        <title>Component Validation Report Template</title>
        <sections>
            <section name="Summary">
                <content>
          Brief overview of the component and validation results.
          Include overall pass/fail status and major findings.
                </content>
            </section>

            <section name="Visual Accuracy">
                <content>
          Assessment of the component's visual appearance compared to the Figma design.
          Include screenshots and notes on any discrepancies.
                </content>
            </section>

            <section name="Responsive Behavior">
                <content>
          Assessment of the component's behavior across different screen sizes.
          Include screenshots at different breakpoints and notes on any issues.
                </content>
            </section>

            <section name="Functionality">
                <content>
          Assessment of the component's interactive features.
          Include descriptions of tested interactions and any issues found.
                </content>
            </section>

            <section name="Accessibility">
                <content>
          Assessment of the component's accessibility features.
          Include notes on keyboard navigation, ARIA attributes, and any issues found.
                </content>
            </section>

            <section name="Issues and Recommendations">
                <content>
          List of identified issues with recommendations for fixes.
          Prioritize issues by severity.
                </content>
            </section>
        </sections>
    </validation_report_template>
</browser_validation_guidelines>

<!-- Made with Bob -->