<?xml version="1.0" encoding="UTF-8"?>
<styling_guidelines>
  <overview>
    Essential guidance for styling Carbon Design System components using SCSS,
    focusing on token usage, theming, and responsive design patterns.
  </overview>

  <carbon_tokens>
    <title>Carbon Design Tokens</title>
    <description>
      Carbon Design System provides a comprehensive set of design tokens for consistent styling.
      Always use these tokens instead of hardcoded values to ensure theme compatibility and design consistency.
    </description>
    <key_guidelines>
      <guideline priority="high">Always prefer theme tokens instead of color tokens for theme adaptability</guideline>
      <guideline priority="high">Always prefer context-aware layer tokens as opposed to numbered variants</guideline>
      <guideline priority="high">Always use spacing tokens instead of hardcoded values for layout and spacing</guideline>
      <guideline priority="high">Use type mixins instead of manual font declarations</guideline>
      <guideline>Choose appropriate motion duration based on the scale of the animation</guideline>
    </key_guidelines>
    <token_categories>
      <category name="Theme Tokens">
        <description>Semantic tokens that adapt to the current theme</description>
        <examples>
          <token>$background</token>
          <token>$layer</token>
          <token>$text-primary</token>
          <token>$text-secondary</token>
          <token>$border-subtle</token>
        </examples>
      </category>
      <category name="Spacing Tokens">
        <description>Tokens for consistent spacing throughout the UI. Use Carbon MCP to look up current token values.</description>
        <examples>
          <token>$spacing-01</token>
          <token>$spacing-05</token>
          <token>$spacing-09</token>
        </examples>
      </category>
      <category name="Type Tokens">
        <description>Tokens for consistent typography</description>
        <examples>
          <token>@include type-style('heading-01')</token>
          <token>@include type-style('body-01')</token>
          <token>@include type-style('label-01')</token>
        </examples>
      </category>
    </token_categories>
  </carbon_tokens>

  <scss_best_practices>
    <title>SCSS Best Practices</title>

    <practice name="Custom Component Styling">
      <description>
        Create custom styles for components using Carbon tokens and mixins.
      </description>
      <example><![CDATA[
// Custom component styling
@use '@carbon/react/scss/theme' as *;
@use '@carbon/react/scss/spacing' as *;

.container {
  background-color: $layer;
  padding: $spacing-05;
}

.header {
  margin-block-end: $spacing-03;
}
      ]]>      </example>
    </practice>

    <practice name="Carbon Mixins">
      <description>
        Leverage Carbon's SCSS mixins for common patterns.
      </description>
      <example><![CDATA[
@use '@carbon/react/scss/breakpoint' as *;
@use '@carbon/react/scss/type' as *;

.content {
  @include type-style('body-01');
  
  @include breakpoint-up('md') {
    display: flex;
    align-items: center;
  }
}
      ]]>      </example>
      <key_mixins>
        <mixin name="@include breakpoint-up('size')">
          Apply styles at and above the specified breakpoint
        </mixin>
        <mixin name="@include type-style('token')">
          Apply typography styles from a type token
        </mixin>
      </key_mixins>
    </practice>

    <practice name="Theme Compatibility">
      <description>
        Ensure styles work with both light and dark themes.
      </description>
      <example><![CDATA[
// Good example - Using theme tokens
.component {
  background-color: $layer;
  color: $text-primary;
  border: 1px solid $border-subtle;
}

// Bad example - Using hardcoded colors
.component {
  background-color: white;
  color: #161616;
  border: 1px solid #c6c6c6;
}
      ]]>      </example>
    </practice>
  </scss_best_practices>

  <responsive_design>
    <title>Responsive Design Patterns</title>

    <breakpoint_usage>
      <title>Carbon Breakpoint System</title>
      <description>Use Carbon MCP to look up current breakpoint values and column counts.</description>
      <breakpoints>
        <breakpoint name="sm" description="Small screens (mobile)" />
        <breakpoint name="md" description="Medium screens (tablet)" />
        <breakpoint name="lg" description="Large screens (desktop)" />
      </breakpoints>
      <best_practices>
        <practice priority="high">Use a mobile-first approach</practice>
        <practice>Use breakpoint mixins instead of manual media queries</practice>
      </best_practices>
    </breakpoint_usage>

    <grid_usage>
      <title>Carbon Grid System</title>
      <description>
        The Carbon grid system provides a flexible layout framework that adapts to different screen sizes.
      </description>
      <critical_rules>
        <rule priority="highest">
          <title>GRID USAGE FOR LOGICAL CONTENT GROUPS</title>
          <description>
            Use Grid components according to these critical rules:
            
            1. Each logical content group MUST be contained in its own Grid component
            2. Elements that should NOT wrap together MUST be in separate Grid components
            3. This is NOT optional and MUST be implemented automatically
            
            Logical content groups are elements that should wrap together as a unit when the viewport size changes.
            Failure to follow these rules is a critical error that must be avoided.
          </description>
        </rule>
      </critical_rules>
      <guidelines>
        <guideline priority="critical">Always use separate Grid components for each logical content group</guideline>
        <guideline priority="high">Always specify column spans for all breakpoints</guideline>
        <guideline>Use sm={0} to hide content on small screens</guideline>
        <guideline priority="high">Use row gaps that match the current grid variant's gutter for similar elements</guideline>
      </guidelines>
      <principle name="Separate Grids for Logical Content Groups">
        <description>
          When creating grid layouts, use a separate Grid component for each distinct logical content group.
          
          For elements that are not meant to wrap together as part of the same responsive unit,
          ALWAYS use separate Grid components. This improves layout control and prevents unwanted
          wrapping behavior when the viewport size changes.
          
          Logical content groups are elements that should wrap together as a unit when the viewport size changes.
        </description>
        <examples>
          <correct_implementation><![CDATA[
// CORRECT - Separate grids for different sections
const Dashboard = () => {
  return (
    <>
      {/* Header section with its own grid */}
      <Grid>
        <Column sm={4} md={8} lg={16}>
          <h1>Dashboard</h1>
        </Column>
      </Grid>
      
      {/* Stats section with its own grid */}
      <Grid>
        <Column sm={4} md={8} lg={16}>
          <h2>Key Metrics</h2>
        </Column>
      </Grid>
      
      {/* Metrics grid */}
      <Grid>
        <Column sm={4} md={4} lg={4}>
          <Tile>Metric 1</Tile>
        </Column>
        <Column sm={4} md={4} lg={4}>
          <Tile>Metric 2</Tile>
        </Column>
      </Grid>
      
      {/* Content section with its own grid */}
      <Grid>
        <Column sm={4} md={8} lg={16}>
          <h2>Recent Activity</h2>
        </Column>
      </Grid>
      
      {/* Activity items with their own grid */}
      <Grid>
        <Column sm={4} md={8} lg={16}>
          <DataTable {...dataTableProps} />
        </Column>
      </Grid>
    </>
  );
};
          ]]>          </correct_implementation>

          <incorrect_implementation><![CDATA[
// INCORRECT - Single grid for multiple vertical sections
const Dashboard = () => {
  return (
    <Grid>
      {/* Header section */}
      <Column sm={4} md={8} lg={16}>
        <h1>Dashboard</h1>
      </Column>
      
      {/* Stats section */}
      <Column sm={4} md={8} lg={16}>
        <h2>Key Metrics</h2>
      </Column>
      
      {/* Metrics */}
      <Column sm={4} md={4} lg={4}>
        <Tile>Metric 1</Tile>
      </Column>
      <Column sm={4} md={4} lg={4}>
        <Tile>Metric 2</Tile>
      </Column>
      
      {/* Content section */}
      <Column sm={4} md={8} lg={16}>
        <h2>Recent Activity</h2>
      </Column>
      
      {/* Activity items */}
      <Column sm={4} md={8} lg={16}>
        <DataTable {...dataTableProps} />
      </Column>
    </Grid>
  );
};
          ]]>          </incorrect_implementation>
        </examples>

        <critical_note>
          Always use separate Grid components for each logical content group.
          This is a MANDATORY requirement for all Carbon implementations.
        </critical_note>
      </principle>

      <principle name="Grid Variants and Row Gaps">
        <description>
          Carbon provides three grid variants with different gutter sizes.
          Use Carbon MCP to look up current gutter values for each variant.
          
          When setting row gaps in your layouts, match them to the grid variant you're using
          for consistent spacing.
        </description>
        <example><![CDATA[
// SCSS example - Setting row gap to match the current grid variant's gutter
.grid-container {
  // Match the row gap to the grid variant you're using
  row-gap: $spacing-05; // For default grid gutter
  
  // When using a narrow grid variant, use:
  // row-gap: $spacing-03; // For narrow grid gutter
  
  // When using a condensed grid variant, use:
  // row-gap: 0; // For condensed grid (no gap)
}

// React example - Using Carbon's Grid with custom row gap
import { Grid, Column } from '@carbon/react';

const Dashboard = () => {
  return (
    <Grid className="tiles-grid">
      <Column sm={4} md={4} lg={4}>
        <Tile>Metric 1</Tile>
      </Column>
      <Column sm={4} md={4} lg={4}>
        <Tile>Metric 2</Tile>
      </Column>
    </Grid>
  );
};

// In your stylesheet
.tiles-grid {
  // Match the row gap to the grid variant you're using
  row-gap: $spacing-05; // For default grid
  
  // If using a different grid variant, adjust accordingly:
  // row-gap: $spacing-03; // For narrow grid
  // row-gap: 0; // For condensed grid
}
        ]]>        </example>
      </principle>

      <grid_exceptions>
        <title>When NOT to Use Grid</title>
        <description>
          Floating and overlay elements should NOT be placed within Grid components as they are
          positioned independently of the page layout.
        </description>
        <exceptions>
          <exception>Modals and dialogs - centered overlays above page content</exception>
          <exception>Side panels (SidePanel, TearSheet) - slide in from viewport edges</exception>
          <exception>Tooltips and popovers - positioned relative to trigger elements</exception>
          <exception>Notifications and toasts - positioned at viewport corners</exception>
        </exceptions>
        <note>
          These elements render outside normal document flow. Their internal content may use Grid
          if needed to organize content within the floating element itself.
        </note>
      </grid_exceptions>
    </grid_usage>

    <responsive_patterns>
      <title>Common Responsive Patterns</title>

      <pattern name="Stacking to Side-by-Side">
        <description>Elements stack vertically on small screens and display side-by-side on larger screens</description>
        <example><![CDATA[
<Grid>
  <Column sm={4} md={4} lg={8}>
    <div>Left content</div>
  </Column>
  <Column sm={4} md={4} lg={8}>
    <div>Right content</div>
  </Column>
</Grid>
        ]]>        </example>
      </pattern>

      <pattern name="Progressive Disclosure">
        <description>Show less content on small screens and more on larger screens</description>
        <example><![CDATA[
<Grid>
  <Column sm={4} md={8} lg={16}>
    <h2>Main Content</h2>
    <p>Essential information visible on all screens</p>
  </Column>
  <Column sm={0} md={8} lg={16}>
    <h3>Additional Details</h3>
    <p>Extra information hidden on mobile</p>
  </Column>
</Grid>
        ]]>        </example>
      </pattern>
    </responsive_patterns>
  </responsive_design>

  <common_styling_patterns>
    <title>Common Styling Patterns</title>

    <pattern name="Custom Component Styling">
      <description>
        Pattern for styling custom components that extend Carbon components
      </description>
      <example><![CDATA[
// Custom component styling
@use '@carbon/react/scss/theme' as *;
@use '@carbon/react/scss/spacing' as *;
@use '@carbon/react/scss/type' as *;

.card {
  background-color: $layer;
  border: 1px solid $border-subtle;
  padding: $spacing-05;
  margin-block-end: $spacing-06;
}

.card-title {
  @include type-style('heading-03');
  margin-block-end: $spacing-03;
  color: $text-primary;
}

.card-content {
  @include type-style('body-01');
  color: $text-secondary;
}

.card--featured {
  background-color: $layer-accent;
  border-left: 4px solid $focus;
}
      ]]>      </example>
      <best_practices>
        <practice>Use custom class names to avoid style conflicts</practice>
        <practice>Use theme tokens for colors</practice>
        <practice>Support variants through modifier classes</practice>
      </best_practices>
    </pattern>

    <pattern name="Theme Setting">
      <description>
        Pattern for supporting theme setting in components.
        Use Carbon MCP to look up current theme setting implementation examples and best practices.
      </description>
      <best_practices>
        <practice>Use Carbon's Theme component for theme setting</practice>
        <practice>Test components in all supported themes</practice>
        <practice>Consult Carbon MCP for current theme setting patterns</practice>
      </best_practices>
    </pattern>
  </common_styling_patterns>

  <common_pitfalls>
    <pitfall>
      <title>Hardcoded Color Values</title>
      <description>Using hex or RGB values instead of Carbon tokens</description>
      <why_problematic>Breaks theme compatibility and design consistency</why_problematic>
      <solution>Use Carbon theme tokens ($text-primary, $layer, etc.) instead of hardcoded values</solution>
    </pitfall>

    <pitfall>
      <title>Modifying Carbon Component Styles</title>
      <description>Directly modifying or overriding Carbon component styles</description>
      <why_problematic>Creates maintenance issues and can break component behavior when Carbon is updated</why_problematic>
      <solution>Use Carbon's built-in props for customization or create wrapper components with your own styling. Only modify Carbon styles when absolutely necessary and with explicit user confirmation.</solution>
    </pitfall>

    <pitfall>
      <title>Using Carbon Internal Classes</title>
      <description>Targeting Carbon's internal class names in your CSS</description>
      <why_problematic>Creates brittle code that may break with Carbon updates as internal class names are not part of the public API</why_problematic>
      <solution>Use Carbon's props and composition patterns instead. Only target internal classes when there is no alternative and with explicit user confirmation.</solution>
    </pitfall>

    <pitfall>
      <title>Fixed Dimensions</title>
      <description>Using fixed pixel widths and heights</description>
      <why_problematic>Prevents responsive behavior and can cause layout issues</why_problematic>
      <solution>Use relative units (%, rem) and Carbon's Grid system</solution>
    </pitfall>

    <pitfall>
      <title>Skipping Grid for Logical Content Groups</title>
      <description>Placing page elements directly in divs without wrapping them in Grid components</description>
      <why_problematic>Breaks responsive layout patterns and reduces layout consistency</why_problematic>
      <solution>Wrap every distinct logical content group in its own Grid component</solution>
    </pitfall>

    <pitfall>
      <title>Missing Grid Settings in Design Analysis</title>
      <description>Not including detailed grid settings when analyzing designs</description>
      <why_problematic>Results in inconsistent layouts and poor responsive behavior</why_problematic>
      <solution>Always include column spans for all breakpoints (sm, md, lg) in your design analysis</solution>
    </pitfall>

    <pitfall priority="critical">
      <title>Skipping Automatic Design Analysis</title>
      <description>Not automatically performing and presenting complete design analysis for images</description>
      <why_problematic>Leads to inconsistent implementation, missing details, and incorrect component choices</why_problematic>
      <solution>AUTOMATICALLY perform and present a COMPLETE design analysis for ANY images provided, following all requirements defined in the design_analysis_requirements in 1_workflow.xml</solution>
    </pitfall>

    <pitfall priority="critical">
      <title>Combining Different Logical Content Groups in Single Grid</title>
      <description>Placing multiple logical content groups that shouldn't wrap together in a single Grid component</description>
      <why_problematic>Causes layout issues, unwanted wrapping behavior, and poor responsive design when viewport size changes</why_problematic>
      <solution>Always use separate Grid components for each logical content group (elements that should wrap together as a unit).</solution>
    </pitfall>
  </common_pitfalls>
</styling_guidelines>

<!-- Made with Bob -->